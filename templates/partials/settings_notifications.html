<div class="settings-panel">
    <h3>Notifications</h3>
    <p class="color-muted">Get alerted when your playbooks run.</p>
    <hr>

    <form hx-post="/settings/notifications" hx-swap="none">

        <label>
            <strong style="color: var(--text-primary);">Apprise URL</strong>
            <small style="color: var(--text-muted);">Supports Discord, Slack, Telegram, Teams, Email, and <a
                    href="https://github.com/caronc/apprise" target="_blank">more</a>.</small>
            <input type="password" name="apprise_url" placeholder="discord://webhook_id/token" value="{{ apprise_url }}"
                style="background: var(--surface-secondary); color: var(--text-primary); border: 1px solid var(--border-subtle);">
        </label>


        <fieldset
            style="margin-top: 1.5rem; border: 1px solid var(--border-subtle); padding: 1rem; border-radius: 8px;">
            <legend><strong style="color: var(--text-primary);">Triggers</strong></legend>
            <label style="color: var(--text-primary);">
                <input type="checkbox" name="notify_on_failure" {% if notify_on_failure %}checked{% endif %}>
                Notify on Failure ðŸ”´
            </label>

            <label style="color: var(--text-primary);">
                <input type="checkbox" name="notify_on_success" {% if notify_on_success %}checked{% endif %}>
                Notify on Success ðŸŸ¢
            </label>

        </fieldset>

        {% if request.state.user.role == 'admin' %}
        <div style="margin-top: 2rem; display: flex; gap: 1rem; justify-content: flex-end;">
            <button type="button" class="contrast" hx-post="/settings/test-notification" style="width: auto;">Test
                Notification</button>
            <button type="submit" class="primary" style="width: auto;">Save Configuration</button>
        </div>
        {% endif %}
    </form>
</div>