<header style="display: flex; justify-content: space-between; align-items: center; border-bottom: none;">
    <h5 style="margin: 0;">Edit Schedule</h5>
    <button type="button" aria-label="Close" @click="showEditModal = false"
        style="background: none; border: none; font-size: 1.5rem; cursor: pointer; color: var(--ds-gray-600); line-height: 1; padding: 0;">&times;</button>
</header>

<section style="padding: 1rem 0;">
    <p style="color: var(--ds-gray-600); font-size: 14px; margin-bottom: 1.5rem;">
        Update the cron expression and execution target for <strong>{{ job.args[0] or job.playbook }}</strong>.
    </p>

    <form hx-put="/schedule/{{ job.id }}" hx-target="#job-row-{{ job.id }}" hx-swap="outerHTML">

        <label style="margin-bottom: 2rem;">
            <span style="display: block; font-size: 13px; font-weight: 500; color: #444; margin-bottom: 4px;">Cron
                Expression</span>
            <input type="text" name="cron" value="{{ job.cron }}" placeholder="* * * * *" required
                style="margin-bottom: 8px;">
            <div style="color: var(--ds-gray-500); font-size: 11px;">
                Example: <code
                    style="background: var(--ds-background-200); padding: 2px 4px; border-radius: 4px; font-size: 10px;">0 3 * * *</code>
                (Every day at 3am)
            </div>
        </label>

        <div style="margin-bottom: 2rem;" x-init="lucide.createIcons()">
            <span
                style="display: block; font-size: 13px; font-weight: 500; color: #444; margin-bottom: 8px;">Target</span>
            {% set initial_targets = job.target or 'all' %}
            <div x-init="initialTargets = '{{ initial_targets | e }}'">
                {% include "partials/target_picker.html" %}
            </div>
        </div>

        <footer style="display: flex; justify-content: flex-end; gap: 8px; margin-top: 2rem; border-top: none;">
            <button type="submit"
                style="width: auto; background: #000; color: #fff; border: none; padding: 10px 20px; border-radius: 6px; font-weight: 500;">Save
                Changes</button>
        </footer>
    </form>
</section>

<style>
    .geist-select-container {
        position: relative;
        width: 100%;
    }

    .geist-select-trigger {
        display: flex;
        align-items: center;
        justify-content: space-between;
        width: 100%;
        height: 42px;
        padding: 0 12px;
        background: #ffffff;
        border: 1px solid #EAEAEA;
        border-radius: 6px;
        font-size: 14px;
        color: #000;
        cursor: pointer;
        transition: all 0.15s ease;
        box-sizing: border-box;
    }

    .geist-select-trigger:hover {
        border-color: #000;
    }

    .geist-select-dropdown {
        position: absolute;
        top: 100%;
        left: 0;
        width: 100%;
        margin-top: 4px;
        background: #ffffff;
        border: 1px solid #EAEAEA;
        border-radius: 6px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        z-index: 10000;
        overflow: hidden;
    }

    .geist-select-header {
        font-size: 10px;
        text-transform: uppercase;
        letter-spacing: 0.1em;
        color: #666666;
        padding: 12px 12px 6px;
        font-weight: 700;
        user-select: none;
    }

    .geist-select-option {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 8px 12px;
        font-size: 14px;
        color: #000;
        cursor: pointer;
        transition: background 0.15s;
        user-select: none;
    }

    .geist-select-option:hover {
        background: #FAFAFA;
    }

    .geist-select-option.dimmed {
        opacity: 0.4;
        pointer-events: none;
    }

    .custom-checkbox {
        width: 18px;
        height: 18px;
        border: 1px solid #EAEAEA;
        border-radius: 4px;
        background: #FFFFFF;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.15s;
        pointer-events: none;
    }

    .custom-checkbox.checked {
        background: #000000;
        border-color: #000000;
    }

    .custom-checkbox svg {
        width: 12px;
        height: 12px;
        color: #FFFFFF;
    }

    .geist-badge {
        background: #111111;
        color: #FFFFFF;
        font-size: 9px;
        padding: 2px 6px;
        border-radius: 4px;
        text-transform: uppercase;
        font-weight: 700;
    }
</style>

<script>
    if (typeof lucide !== 'undefined') {
        lucide.createIcons();
    }
</script>