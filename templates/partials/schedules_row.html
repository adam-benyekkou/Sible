<tr id="job-row-{{ job.id }}">
    <td>
        <strong>{{ job.args[0] }}</strong>
    </td>
    <td>
        <div class="flex flex-col">
            <code
                style="font-size: 12px; background: none; padding: 0; color: var(--text-primary);">{{ job.cron }}</code>
        </div>
    </td>

    <td>
        {% if job.target and job.target != 'all' %}
        <span class="badge secondary"
            style="background: var(--surface-secondary); color: var(--text-primary); border: 1px solid var(--border-subtle);">
            <i data-lucide="{{ 'users' if job.target in groups else 'server' }}"
                style="width: 12px; height: 12px; margin-right: 4px;"></i>
            {{ job.target }}
        </span>
        {% else %}
        <span class="badge secondary"
            style="background: transparent; color: var(--text-muted); border: 1px dashed var(--border-subtle);">
            <i data-lucide="globe" style="width: 12px; height: 12px; margin-right: 4px;"></i>
            All
        </span>

        {% endif %}
    </td>
    <td>
        {% if request.state.user.role == 'admin' %}
        <button class="status-btn"
            hx-post="/schedule/{{ job.id }}/{% if job.status == 'running' %}pause{% else %}resume{% endif %}"
            hx-target="#job-row-{{ job.id }}" hx-swap="outerHTML">
            <span class="badge {{ 'badge-success' if job.status == 'running' else 'badge-secondary' }}">
                {{ 'Active' if job.status == 'running' else 'Paused' }}
            </span>
        </button>
        {% else %}
        <span class="badge {{ 'badge-success' if job.status == 'running' else 'badge-secondary' }}">
            {{ 'Active' if job.status == 'running' else 'Paused' }}
        </span>
        {% endif %}
    </td>
    <td>
        <span class="font-inter" style="font-feature-settings: 'tnum'; font-variant-numeric: tabular-nums;"
            data-tooltip="{{ job.next_run|format_datetime(request.state.user.timezone) if job.next_run else 'Paused' }}">
            {{ job.next_run_human }}
        </span>
    </td>
    <td style="text-align: right;">
        <div style="display: flex; justify-content: flex-end; align-items: center; gap: 8px;">
            {% if request.state.user.role == 'admin' %}
            <button class="action-btn" hx-get="/partials/schedules/row/{{ job.id }}/edit"
                hx-target="#schedule-edit-form-container" hx-swap="innerHTML" hx-trigger="click"
                @click="showEditModal = true" title="Edit Schedule">
                <i data-lucide="edit-3" style="width: 14px; height: 14px; stroke-width: 1.5;"></i>
            </button>
            <button class="action-btn" style="color: var(--sible-error);" hx-delete="/schedule/{{ job.id }}"
                hx-confirm="Delete scheduled job?" hx-target="closest tr" hx-swap="outerHTML" title="Delete Schedule">
                <i data-lucide="trash-2" style="width: 14px; height: 14px; stroke-width: 1.5;"></i>
            </button>
            {% endif %}
        </div>

    </td>
</tr>