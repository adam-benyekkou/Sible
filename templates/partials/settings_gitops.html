<div class="settings-content">
    <header style="margin-bottom: 2rem; display: flex; justify-content: space-between; align-items: center;">
        <div>
            <h2 style="margin-bottom: 0.5rem;">GitOps Configuration</h2>
            <p style="color: var(--ds-gray-600);">Connect Sible to a remote Git repository to synchronize your
                playbooks.</p>
        </div>
        <button hx-post="/api/git/sync" hx-swap="none" aria-label="Sync Git" class="btn-secondary"
            style="display: flex; gap: 8px; align-items: center; padding: 0.5rem 1rem; cursor: pointer;">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                stroke-linecap="round" stroke-linejoin="round">
                <polyline points="23 4 23 10 17 10"></polyline>
                <polyline points="1 20 1 14 7 14"></polyline>
                <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path>
            </svg>
            Sync Now
        </button>
    </header>

    <form hx-post="/api/settings/gitops" hx-swap="none">
        <article class="settings-card">
            <div style="margin-bottom: 1.5rem;">
                <label for="git_repository_url" style="display: block; margin-bottom: 0.5rem; font-weight: 500;">
                    Repository URL
                </label>
                <input type="text" id="git_repository_url" name="git_repository_url"
                    placeholder="https://github.com/username/repo.git or git@github.com:username/repo.git"
                    value="{{ settings.git_repository_url or '' }}"
                    style="width: 100%; padding: 0.5rem; border: 1px solid var(--ds-gray-300); border-radius: 4px;">
                <p style="font-size: 0.8rem; color: var(--ds-gray-500); margin-top: 0.25rem;">
                    The HTTPS or SSH URL of your Git repository.
                </p>
            </div>

            <div style="margin-bottom: 1.5rem;">
                <label for="git_ssh_key" style="display: block; margin-bottom: 0.5rem; font-weight: 500;">
                    SSH Private Key (Optional)
                </label>
                <input type="password" id="git_ssh_key" name="git_ssh_key"
                    placeholder="Paste Private Key (starts with -----BEGIN...)" value="{{ settings.git_ssh_key or '' }}"
                    autocomplete="off"
                    style="width: 100%; padding: 0.5rem; border: 1px solid var(--ds-gray-300); border-radius: 4px; font-family: monospace; font-size: 0.85rem;">
                <p style="font-size: 0.8rem; color: var(--ds-gray-500); margin-top: 0.25rem;">
                    Required if using an SSH URL or a private HTTPS repository. This key is stored securely.
                </p>
            </div>

            <footer
                style="display: flex; justify-content: flex-end; gap: 1rem; margin-top: 2rem; padding-top: 1rem; border-top: 1px solid var(--ds-gray-200);">
                <button type="submit" class="btn-primary">
                    Save Configuration
                </button>
            </footer>
        </article>
    </form>
</div>