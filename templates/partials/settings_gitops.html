<div class="settings-content">
    <header style="margin-bottom: 2rem; display: flex; justify-content: space-between; align-items: center;">
        <div>
            <h2 style="margin-bottom: 0.5rem; color: var(--text-primary);">GitOps Configuration</h2>
            <p style="color: var(--text-muted);">Connect Sible to a remote Git repository to synchronize your
                playbooks.</p>
        </div>

        <button hx-post="/api/git/sync" hx-swap="none" aria-label="Sync Git" class="primary"
            style="display: flex; gap: 8px; align-items: center; padding: 0.5rem 1rem; cursor: pointer;">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                stroke-linecap="round" stroke-linejoin="round">
                <polyline points="23 4 23 10 17 10"></polyline>
                <polyline points="1 20 1 14 7 14"></polyline>
                <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path>
            </svg>
            Sync Now
        </button>
    </header>

    <form hx-post="/api/settings/gitops" hx-swap="none">
        <div style="margin-bottom: 1.5rem;">
            <label for="git_repository_url"
                style="display: block; margin-bottom: 0.5rem; font-weight: 500; color: var(--text-primary);">
                Repository URL
            </label>
            <input type="text" id="git_repository_url" name="git_repository_url"
                placeholder="https://github.com/username/repo.git or git@github.com:username/repo.git"
                value="{{ settings.git_repository_url or '' }}"
                style="width: 100%; background: var(--surface-secondary); color: var(--text-primary); border: 1px solid var(--border-subtle);">
            <p style="font-size: 0.8rem; color: var(--text-muted); margin-top: 0.25rem;">
                The HTTPS or SSH URL of your Git repository.
            </p>
        </div>


        <div style="margin-bottom: 1.5rem;">
            <label for="git_ssh_key"
                style="display: block; margin-bottom: 0.5rem; font-weight: 500; color: var(--text-primary);">
                SSH Private Key (Optional)
            </label>
            <input type="password" id="git_ssh_key" name="git_ssh_key"
                placeholder="Paste Private Key (starts with -----BEGIN...)" value="{{ settings.git_ssh_key or '' }}"
                autocomplete="off"
                style="width: 100%; font-family: monospace; font-size: 0.85rem; background: var(--surface-secondary); color: var(--text-primary); border: 1px solid var(--border-subtle);">
            <p style="font-size: 0.8rem; color: var(--text-muted); margin-top: 0.25rem;">
                Required if using an SSH URL or a private HTTPS repository. This key is stored securely.
            </p>
        </div>


        <div style="display: flex; justify-content: flex-end; gap: 1rem; margin-top: 2rem;">
            <button type="submit" class="primary" style="width: auto; padding-left: 1.5rem; padding-right: 1.5rem;">
                Save Configuration
            </button>
        </div>
    </form>
</div>