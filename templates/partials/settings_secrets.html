<div class="settings-panel">
    <h3>Secrets & Environment Variables</h3>
    <p class="color-muted font-sm">These variables will be injected into every <code>ansible-playbook</code> execution
        environment.</p>
    <hr>

    <!-- Secrets List -->
    <div id="secrets-list" hx-get="/partials/settings/secrets/list" hx-trigger="load, secrets-refresh from:body">
        <div style="display: flex; justify-content: center; padding: 2rem;">
            <span aria-busy="true">Loading variables...</span>
        </div>
    </div>

    <hr style="margin-top: 2rem;">

    <h4>Add New Variable</h4>
    <form hx-post="/settings/secrets" hx-swap="none" hx-on::after-request="this.reset()">
        <div style="display: grid; grid-template-columns: 1fr 2fr; gap: 0.5rem 1rem; align-items: flex-end;">
            <strong>Key</strong>
            <strong>Value</strong>

            <input type="text" name="key" placeholder="e.g. ANSIBLE_USER" required style="margin: 0;">
            <textarea name="value" placeholder="e.g. admin" required style="margin: 0; min-height: 80px;"></textarea>
            <!-- Secret toggle removed -->
        </div>
        <div style="margin-top: 1rem; text-align: right;">
            <button type="submit" class="primary" style="width: auto;">Add Variable</button>
        </div>
    </form>
</div>