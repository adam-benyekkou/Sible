<div class="settings-panel">
    <h3>Secrets & Environment Variables</h3>
    <p class="color-muted font-sm">These variables will be injected into every <code>ansible-playbook</code> execution
        environment.</p>
    <hr>

    <!-- Secrets List -->
    <div id="secrets-list" hx-get="/partials/settings/secrets/list" hx-trigger="load, secrets-refresh from:body">
        <div style="display: flex; justify-content: center; padding: 2rem;">
            <span aria-busy="true">Loading variables...</span>
        </div>
    </div>

    <hr style="margin-top: 2rem;">

    <h4>Add New Variable</h4>
    <form hx-post="/settings/secrets" hx-swap="none" hx-on::after-request="this.reset()">
        <div style="display: grid; grid-template-columns: 1fr 2fr auto; gap: 1rem; align-items: end;">
            <label>
                <strong>Key</strong>
                <input type="text" name="key" placeholder="e.g. ANSIBLE_USER" required>
            </label>
            <label>
                <strong>Value</strong>
                <input type="text" name="value" placeholder="e.g. admin" required>
            </label>
            <div style="margin-bottom: 0.75rem;">
                <label
                    style="margin: 0; display: flex; align-items: center; gap: 0.5rem; white-space: nowrap; cursor: pointer;">
                    <input type="checkbox" name="is_secret">
                    Is Secret?
                </label>
            </div>
        </div>
        <div style="margin-top: 1rem; text-align: right;">
            <button type="submit" class="primary" style="width: auto;">Add Variable</button>
        </div>
    </form>
</div>