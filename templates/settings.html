{% extends "layout.html" %}

{% block content %}
<div class="settings-container" style="display: flex; height: 100vh;">
    <!-- Settings Sidebar -->
    <aside
        style="width: 280px; background: var(--ds-background-200); border-right: 1px solid var(--ds-gray-200); display: flex; flex-direction: column;">
        <div style="padding: 1.5rem;">
            <h4 style="margin-bottom: 0.5rem;">Settings</h4>
            <p style="font-size: 0.85rem; color: var(--ds-gray-600);">Manage your instance</p>
        </div>

        <nav style="flex-grow: 1; padding: 0 1rem;">
            {% if request.state.user.role == 'admin' %}
            <a href="/settings/general" class="settings-nav-item {{ 'active' if active_tab == 'general' else '' }}">
                General
            </a>
            {% endif %}

            <a href="/settings/retention" class="settings-nav-item {{ 'active' if active_tab == 'retention' else '' }}">
                Retention Policies
            </a>



            {% if request.state.user.role == 'admin' %}
            <a href="/settings/secrets" class="settings-nav-item {{ 'active' if active_tab == 'secrets' else '' }}">
                Secrets
            </a>

            <a href="/settings/gitops" class="settings-nav-item {{ 'active' if active_tab == 'gitops' else '' }}">
                GitOps
            </a>

            <a href="/settings/notifications"
                class="settings-nav-item {{ 'active' if active_tab == 'notifications' else '' }}">
                Notifications
            </a>

            <a href="/settings/users" class="settings-nav-item {{ 'active' if active_tab == 'users' else '' }}">
                Users
            </a>
            {% endif %}

            <a href="/" class="settings-nav-item" style="margin-top: auto; border-top: 1px solid var(--ds-gray-200);">
                ‚Üê Back to Dashboard
            </a>
        </nav>
    </aside>

    <!-- Content Area -->
    <main id="settings-content" style="flex-grow: 1; padding: 2rem; overflow-y: auto;">
        {% if active_tab == 'general' %}
        {% include "partials/settings_general.html" %}
        {% elif active_tab == 'retention' %}
        {% include "partials/settings_retention.html" %}
        {% elif active_tab == 'notifications' %}
        {% include "partials/settings_notifications.html" %}

        {% elif active_tab == 'secrets' %}
        {% include "partials/settings_secrets.html" %}
        {% elif active_tab == 'users' %}
        {% include "partials/settings_users.html" %}
        {% elif active_tab == 'gitops' %}
        {% include "partials/settings_gitops.html" %}
        {% endif %}

    </main>
</div>

<style>
    .settings-nav-item {
        display: block;
        padding: 0.75rem 1rem;
        margin-bottom: 0.25rem;
        border-radius: 6px;
        color: var(--ds-gray-600);
        text-decoration: none;
        font-size: 0.95rem;
        transition: all 0.2s;
    }

    .settings-nav-item:hover {
        background: var(--ds-gray-100);
        color: var(--ds-gray-1000);
    }

    .settings-nav-item.active {
        background: var(--ds-gray-200);
        color: var(--ds-gray-1000);
        font-weight: 500;
    }
</style>
{% endblock %}